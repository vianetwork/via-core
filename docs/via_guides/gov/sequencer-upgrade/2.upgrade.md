# How to execute the upgrade proposal

1. Create an unsigned upgrade transaction. Make sure to select the input you want to use and the `upgradeProposalTxId`.
   To fetch the UTXOs from regtest use this cmd

```sh
via create-update-sequencer \
--inputTxId <tx_id> \
--inputVout <vout> \
--inputAmount <amount> \
--sequencerAddress <sequencerAddress> \
--fee 500 \
--outDir <multisig.json> \
--network <mainnet | testnet | devnet>
```

| **Parameter**        | **Description**                                                                                                                          | **Example Value**              | **Notes / Purpose**                                                                                  |
| -------------------- | ---------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------ | ---------------------------------------------------------------------------------------------------- |
| `--inputTxId`        | The **transaction ID (TxID)** of the UTXO you are spending.                                                                              | `e3b0c44298fc1c14...`          | This identifies the source transaction that provides the input funds for the upgrade transaction.    |
| `--inputVout`        | The **output index (vout)** of the UTXO in the input transaction.                                                                        | `0`                            | Each transaction can have multiple outputs; this selects which one youâ€™re using as input.            |
| `--inputAmount`      | The **amount (in satoshis or smallest unit)** of the UTXO being spent.                                                                   | `100000`                       | Must exactly match the value of the referenced UTXO; used to calculate transaction balance and fees. |
| `--sequencerAddress` | The **new sequencer address**.                                                                                                           | `b2c1f9d2a83e4f...`            | Links this upgrade transaction to the specific new sequencer address.                                |
| `--fee`              | The **transaction fee** (in satoshis or smallest unit).                                                                                  | `500`                          | Deducted from the total input amount; ensures miners include the transaction in a block.             |
| `--outDir`           | The **output directory or file** where the unsigned transaction JSON will be saved (make sure te file exists and includes the multisig). | `multisig.json`                | Contains the generated unsigned transaction for further signing and broadcasting.                    |
| `--network`          | Specifies the **network environment** where the transaction will be executed.                                                            | `mainnet`, `testnet`, `devnet` | Determines which blockchain network parameters to use.                                               |

2. Sign the transaction using one of the signers.

```sh
via multisig sign-tx \
    --privateKey <private-key> \
    --outDir <multisig.json> \
    --network <mainnet | testnet | devnet>
```

3. Share the signed file `multisig.json` with second signer. The signer should follow the **step 2** to sign it.

4. When reach the minimum signers **M/N** any signer can **finalize** the transaction

```sh
via multisig finalize-tx \
    --outDir <multisig.json> \
    --network <mainnet | testnet | devnet>
```

5. Broadcast the final transaction to Bitcoin network

```sh
via multisig broadcast-tx \
    --rpcUrl http://0.0.0.0:18443 \
    --rpcUser rpcuser \
    --rpcPass rpcpassword \
    --outDir <multisig.json> \
    --network <mainnet | testnet | devnet>
```
