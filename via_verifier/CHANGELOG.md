# Changelog

## [1.1.0](https://github.com/vianetwork/via-core/compare/via_verifier-v1.0.0...via_verifier-v1.1.0) (2025-12-05)


### Features

* add EN as a fallback for celestia ([9ba83e6](https://github.com/vianetwork/via-core/commit/9ba83e63a1c2eccad39ae1843b92b3ae323dc8b0))
* add log to btc_watch ([7154519](https://github.com/vianetwork/via-core/commit/71545190e6dea02fb88b8b87ed3312b174cd7996))
* add logs ([cc3e4d4](https://github.com/vianetwork/via-core/commit/cc3e4d4508488e10b4002f63d1ca20f8ba806a75))
* add logs to the zk verification task ([d42e3b2](https://github.com/vianetwork/via-core/commit/d42e3b23e69892f10903f57c6f0ce3a114226e1e))
* add logs to the zk verification task ([a4f6add](https://github.com/vianetwork/via-core/commit/a4f6add3dfce82dce8a951794da6624b711b0d92))
* Batch finialization threshold ([1a5f414](https://github.com/vianetwork/via-core/commit/1a5f414c324d3c0d81b98cf9dd2657916c91e5f9))
* create via consensus lib and remove batch finalization threshold from envs ([cbd2825](https://github.com/vianetwork/via-core/commit/cbd28255f130098e72745e446fe7457b1ead3762))
* fetch the system wallets based on the l1 block number ([859e831](https://github.com/vianetwork/via-core/commit/859e831ad938d8376db1ad9258e431058a513243))
* **lib/via_verification:** support l1 batch verification peer protocol version ([ece797d](https://github.com/vianetwork/via-core/commit/ece797d704ebf86ac30172c5c4be9190f131a698))
* **node/via_zk_verification:** add logic to fetch the proof from object store when the verifier uses EN as DA provider ([09fe8f3](https://github.com/vianetwork/via-core/commit/09fe8f3a7468411ddad14a7db3e428977141ec48))
* **reorg_detector:** add check for canonical chain before insert into db, this will make sure that the last inserted block is valid ([b72360f](https://github.com/vianetwork/via-core/commit/b72360ffe54388177297a41c4623773f89dd827d))
* Support stable compiler for VM (and some other crates) ([#3248](https://github.com/vianetwork/via-core/issues/3248)) ([3f497b2](https://github.com/vianetwork/via-core/commit/3f497b2543daa3deb91f4206cab878c3e503fb2d))
* **via_musig2:** update the transaction builder logic, support store data by output, this will help to store the l2 tx hash when process withdrawals ([0af6d22](https://github.com/vianetwork/via-core/commit/0af6d22af935e7c5bfef6b5b52b0855bae22841b))
* **via_query_client:** add l2 query client and update configs ([efeea9c](https://github.com/vianetwork/via-core/commit/efeea9c88d960acc323a5de1d154b2d189c2496e))
* **via_verifier_block_detector:** implement the reorg detector logic ([7349ff1](https://github.com/vianetwork/via-core/commit/7349ff1878b09eeec7b1cbdc8bf0c014874d4d74))
* **via_verifier_block_reverter:** implement the block reverter to rollback the verifier state when reorg detected ([ed7012b](https://github.com/vianetwork/via-core/commit/ed7012b67ac723857004f4b5d0f68f0595e3211e))
* **via_verifier_btc_watch:** allow the verifier to  process finalized when a reorg fork is found ([26a7b49](https://github.com/vianetwork/via-core/commit/26a7b49206e084ac178e863460a3ab8c13f30ef2))
* **via_verifier_btc_watch:** moving the state init from the verifier btc watch to verifier init module ([40685f1](https://github.com/vianetwork/via-core/commit/40685f1c6aaa450dc5a9234d2db1c08e9c33f660))
* **via_verifier_btc_watch:** update the withdrawal message processor ([06abc09](https://github.com/vianetwork/via-core/commit/06abc090c3e3b7e5d7cd47122e212d42ac34f69d))
* **via_verifier_coordinator:** update the withdrawal session logic to use the refactored transaction builder ([7bccf8a](https://github.com/vianetwork/via-core/commit/7bccf8a21e253f929e2bd02d9708b280bc2822a1))
* **via_verifier_dal:** add the l1 block number to the system wallet and create a new dal to track the node blocks ([8398336](https://github.com/vianetwork/via-core/commit/8398336d87e57b586211e6514a01bf8e79e69308))
* **via_verifier_dall:** impl the withdrawal dal ([f18bd49](https://github.com/vianetwork/via-core/commit/f18bd49cbf601b95308ecaac46c47ebda0cce4a3))
* **via_verifier:** add logic to via modules to stop operating when a reorg is found ([a50570d](https://github.com/vianetwork/via-core/commit/a50570d9a567087ce3580547019bc024156b6356))
* **via_verifier:** improve logging and metrics ([57f2f57](https://github.com/vianetwork/via-core/commit/57f2f57e6e55b204c95a19792b97e2e9eaaabfad))
* **via_withdrawal_client:** update the withdrawal client and integrate the node as data source ([7684751](https://github.com/vianetwork/via-core/commit/76847518d0949c225f5e2cfa5fe2be78f485ba9b))
* **via-da-http:** implement an http DA client ([38ac186](https://github.com/vianetwork/via-core/commit/38ac186a397eb54ff0cef1e83da7fbad40681a56))
* **vua_verifier_state:** add  verifier state that returns common used helpers to check the sync state ([6c2246b](https://github.com/vianetwork/via-core/commit/6c2246b699ebd107ccb02c73a745ff626503f98a))


### Bug Fixes

* add updated system contracts for bitcoin vm ([e4dc39f](https://github.com/vianetwork/via-core/commit/e4dc39f1898ad7ddc9b74fd94114ae1cf14c8d72))
* allow try the next version to decode the proof data in case of protocol upgrade ([3ad6852](https://github.com/vianetwork/via-core/commit/3ad6852b6813737ac7154a8af86ec8c1556749f8))
* block the zk verification if not in sync and use the verifier state lib ([ba5ea34](https://github.com/vianetwork/via-core/commit/ba5ea34647ca0e6f5a61da9517a00f264e2b68c5))
* **btc_sender:** update metrics to export the wallet address ([26da728](https://github.com/vianetwork/via-core/commit/26da7287179c9dc6620a8a782289520d0b9efa44))
* **btc_sender:** update metrics to export the wallet address ([40b5df4](https://github.com/vianetwork/via-core/commit/40b5df48fdfd4cd5579981e082f7f2bcd8040bc8))
* **btc_sender:** update the inscriber context before each cycle ([3ad4bdb](https://github.com/vianetwork/via-core/commit/3ad4bdb3116e1b61109273d842f915643c236607))
* clamp the btc_watch to process the batches until the last validated ones from the reorg detector ([430713b](https://github.com/vianetwork/via-core/commit/430713bbb3e3b59f976e3d21d014ea2fa29dc4d2))
* delete soft reorg ([e16cf06](https://github.com/vianetwork/via-core/commit/e16cf061fcd7817602acf5f3d4a0ac117f3ab9a5))
* ignore unknown fields in rpc json response ([#2962](https://github.com/vianetwork/via-core/issues/2962)) ([4d8f7f0](https://github.com/vianetwork/via-core/commit/4d8f7f055a75eb82c3046c7ef7cc410e44b69613))
* refactor the soft reorg logic in the verifier ([57423b2](https://github.com/vianetwork/via-core/commit/57423b236ffdd1c1eb225a1a11960e60572bbdfe))
* remove soft reorg logic from the reorg detector layer and move it the the reverter ([3ce72ac](https://github.com/vianetwork/via-core/commit/3ce72ac0fa95980cd7a00a83515e112a40b27447))
* reset the indexer last indexed block when a reorg is detected but ([f27b3e1](https://github.com/vianetwork/via-core/commit/f27b3e108a8e03c7fc2400c46d1246deb07c6c14))
* resovle missing DA secrets ([9d9b3ca](https://github.com/vianetwork/via-core/commit/9d9b3ca5b7c7766998b1839e65521d23f044ea26))
* skip initialization when verifier storage exists ([edfc952](https://github.com/vianetwork/via-core/commit/edfc9526c516f25b5bbecee7c7899333e14d0d91))
* tests ([a7428ca](https://github.com/vianetwork/via-core/commit/a7428cae0d520e13f378b405fcc7e41532744f59))
* the orchestration layer for the verifier and node ([b623158](https://github.com/vianetwork/via-core/commit/b6231588935126ddecd6eda9fa8832c9d4f5460c))
* the verifier deposit message processor and clean code ([db2b490](https://github.com/vianetwork/via-core/commit/db2b490c694fbc7ea4cbf4437363f2772c36a3a6))
* verifier node builder ([fcdf544](https://github.com/vianetwork/via-core/commit/fcdf5444a9b679e7fd1e1a7465c8374dc7774db2))
* verifier soft reorg ([b7267f6](https://github.com/vianetwork/via-core/commit/b7267f618c0ae9ab0d75e33e33a57e1bf9f0a198))
* **via_verifier_btc_sender:** before update the last indexed  block number check if the reorg detector did not modify it during cycle exec ([c0b226b](https://github.com/vianetwork/via-core/commit/c0b226b546ccf2d4892f746935989e6f8d9247e8))
* **via_verifier_reorg_detector:** reset the indexer last indexed block when a reorg is detected but ([ce967ff](https://github.com/vianetwork/via-core/commit/ce967ffc96bb89268eb696ca099b1d90e265f927))
* **via_verifier_reorg:** update the reorg detector to use storage to avoid long pooling connections ([a67f908](https://github.com/vianetwork/via-core/commit/a67f908dd9e20e90e84239aff01fd036357e7815))
* **via_verifier_reverter:** ignore the reorgs if the l1 batch is zero, this means a soft reorg is in progress ([88d4cb3](https://github.com/vianetwork/via-core/commit/88d4cb36d588b38c499bfd7c1ef6e79da8f42d2e))
* **via_verifier_session:** fix the withdrawals session ([0b8c935](https://github.com/vianetwork/via-core/commit/0b8c935077a357f521336855a48790108d126ca7))
* **via_verifier_session:** fix the withdrawals session logic queries and condition to check if a withdrawal already processed ([27ec19a](https://github.com/vianetwork/via-core/commit/27ec19a7813dfc1a3738cf3e70764fb22b943872))
* **via_verifier:** select affected l1 batch by reorg ([49fe264](https://github.com/vianetwork/via-core/commit/49fe2648edd51a60a88e91015257bed3d3a83ad1))
* **via-da-clients:** refactor and fix the data encoding for http client ([8352d66](https://github.com/vianetwork/via-core/commit/8352d6657f47abb6477bec6ccf3d73bfd42f765c))
